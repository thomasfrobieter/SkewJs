/*!
* Skew v0.7.1
* Copyright 2018 Marcin Walczak
*This file is part of Skew which is released under MIT license.
*See LICENSE for full license details.
*/
function Skew(e,t){"string"==typeof e?this.targets=document.querySelectorAll(e):e.nodeType?this.targets=[e]:this.targets=e,this.defaults={x:0,y:0,unskewContent:!1,breakpoints:[],debounce:!0,debounceTime:50,beforeSkewListeners:[],afterSkewListeners:[],beforeElementSkewListeners:[],afterElementSkewListeners:[]},this.options=this.defaults,this.currentUnskewContent=this.options.unskewContent,this.timeout,this.update(t);var n=this;return this.eventMethod=function(){var e=n.options.debounce,t=n.options.debounceTime;if(void 0!==n.options.breakpoints){var s=window.innerWidth;n.options.breakpoints.forEach((function(n){n.break>=s&&(void 0!==n.debounce&&(e=n.debounce),void 0!==n.debounceTime&&(t=n.debounceTime))}))}if(e){clearTimeout(n.timeout),n.timeout=setTimeout((function(){n.timeout=null,n.skew()}),t)}else n.skew()},window.addEventListener("load",this.eventMethod),window.addEventListener("resize",this.eventMethod),this}window.jQuery&&($.fn.skew=function(e){$.makeArray(arguments);return this.each((function(){var t=$.data(this,"skewjs");if(t)if("string"==typeof e)t[e]?(t[e].apply(t,n),"destroy"==e&&$.removeData(this,"skewjs")):$.error("Method "+e+" does not exist on Skew");else{var n=$.extend({x:0,y:0,breakpoints:[]},e);t.update(n)}else if("string"!=typeof e){var s=new Skew(this,n=$.extend({x:0,y:0,breakpoints:[]},e));return $.data(this,"skewjs",s),s}}))}),Skew.prototype={skew:function(){var e=this,t=null,n=0,s=0,o=e.options.x,r=e.options.y,i=0,u=0;if(content=[],unskewContent=e.options.unskewContent,contentSkewStyle="",void 0!==e.options.breakpoints){var a=window.innerWidth;if(e.options.breakpoints.forEach((function(e){e.break<a||(void 0!==e.x&&(o=e.x),void 0!==e.y&&(r=e.y),void 0!==e.unskewContent&&(unskewContent=e.unskewContent))})),e.currentUnskewContent!==unskewContent){for(var k=0;k<e.targets.length;k++){t=e.targets[k],!0===e.currentUnskewContent?content=t.childNodes:"string"==typeof e.currentUnskewContent&&""!=e.currentUnskewContent&&(content=t.querySelectorAll(e.currentUnskewContent));for(var f=0;f<content.length;f++)e.setSkewStyle(content[f],"")}content=[],e.currentUnskewContent=unskewContent}}for(k=0;k<this.options.beforeSkewListeners.length;k++)this.options.beforeSkewListeners[k](e,e.targets);for(k=0;k<e.targets.length;k++){t=e.targets[k];for(f=0;f<this.options.beforeElementSkewListeners.length;f++)this.options.beforeElementSkewListeners[f](e,t);n=t.offsetWidth,s=t.offsetHeight,i=Math.atan(o/s),u=Math.atan(r/n),skewStyle="skew("+i+"rad, "+u+"rad)",e.setSkewStyle(t,skewStyle),!0===unskewContent?content=t.childNodes:"string"==typeof unskewContent&&""!=unskewContent&&(content=t.querySelectorAll(unskewContent)),contentSkewStyle="skew("+-i+"rad, "+-u+"rad)";for(f=0;f<content.length;f++)e.setSkewStyle(content[f],contentSkewStyle);for(f=0;f<this.options.afterElementSkewListeners.length;f++)this.options.afterElementSkewListeners[f](e,t)}for(k=0;k<this.options.afterSkewListeners.length;k++)this.options.afterSkewListeners[k](e,e.targets);return this},update:function(e){return this.options=this.parseSettings(e,this.options),this.skew(),this},destroy:function(){window.removeEventListener("resize",this.resizeEvent);for(var e=0;e<this.targets.length;e++){var t=this.targets[e],n=t.getAttribute("style"),s=n.indexOf("skew"),o=s+n.substring(s).indexOf(")")+1;if(s>-1){var r=n.substring(0,s),i=n.substring(o);t.setAttribute("style",r+i)}}},parseSettings:function(e,t){var n=void 0!==t?t:this.defaults,s=function(e,t){void 0!==t&&(Array.isArray(t)?t.forEach((function(t){e.push(t)})):e.push(t))};return void 0!==e&&(void 0!==e.x&&(n.x=e.x),void 0!==e.y&&(n.y=e.y),void 0!==e.unskewContent&&(n.unskewContent=e.unskewContent),Array.isArray(e.breakpoints)&&(n.breakpoints=[],e.breakpoints.forEach((function(e){var t={break:void 0!==e.break?e.break:0};void 0!==e.x&&(t.x=e.x),void 0!==e.y&&(t.y=e.y),void 0!==e.unskewContent&&(t.unskewContent=e.unskewContent),void 0!==e.debounce&&(t.debounce=e.debounce),void 0!==e.debounceTime&&(t.debounce=e.debounceTime),n.breakpoints.push(t)})),n.breakpoints.sort((function(e,t){return e.break<t.break?1:e.break>t.break?-1:0}))),void 0!==e.debounce&&(n.debounce=e.debounce),void 0!==e.debounceTime&&(n.debounceTime=e.debounceTime),n.beforeSkewListeners=t.beforeSkewListeners,s(n.beforeSkewListeners,e.beforeSkew),n.afterSkewListeners=t.afterSkewListeners,s(n.afterSkewListeners,e.afterSkew),n.beforeElementSkewListeners=t.beforeElementSkewListeners,s(n.beforeElementSkewListeners,e.beforeElementSkew),n.afterElementSkewListeners=t.afterElementSkewListeners,s(n.afterElementSkewListeners,e.afterElementSkew)),n},setSkewStyle:function(e,t){if(e.nodeType==Node.ELEMENT_NODE){var n=e.getAttribute("style");if(null===n)return n="transform: "+t+";",void e.setAttribute("style",n);var s=n.indexOf("transform:");if(s<0)return n+="transform: "+t+";",void e.setAttribute("style",n);var o=s+n.substring(s).indexOf(";");o<s&&(o=n.length,t+=";");var r=n.indexOf("skew"),i=n.substring(0,o),u=n.substring(o);if(r<0)return n=i+" "+t+u,void e.setAttribute("style",n);o=(s=n.indexOf("skew"))+n.substring(s).indexOf(")")+1,i=n.substring(0,s),u=n.substring(o),n=i+t+u,e.setAttribute("style",n)}},beforeSkew:function(e){return this.options.beforeSkewListeners.push(e),this},afterSkew:function(e){return this.options.afterSkewListeners.push(e),this},beforeElementSkew:function(e){return this.options.beforeElementSkewListeners.push(e),this},afterElementSkew:function(e){return this.options.afterElementSkewListeners.push(e),this}};
